class Book{constructor(title,author,isbn){this.title=title,this.author=author,this.isbn=isbn}}class UI{showAlert(message,className){const div=document.createElement("div");div.className=`alert ${className}`,div.appendChild(document.createTextNode(message));const form=document.getElementById("book-form");form.insertAdjacentElement("beforeend",div),setTimeout(()=>{document.querySelector(".alert").remove()},3e3)}addBookToList(book){const list=document.getElementById("book-list"),row=document.createElement("tr");row.innerHTML=`\n<td>${book.title}</td>\n<td>${book.author}</td>\n<td>${book.isbn}</td>\n<td ><a href="#" title="Delete" class="delete">Delete record</td>\n`,list.appendChild(row)}deleteBook(target){"delete"===target.className&&target.parentElement.parentElement.remove()}clearFields(){document.getElementById("book-title").value="",document.getElementById("book-author").value="",document.getElementById("ISBN").value=""}}class Store{static getBooks(){let books;return books=null===localStorage.getItem("books")?[]:JSON.parse(localStorage.getItem("books")),books}static displayBooks(){const books=Store.getBooks();books.forEach(book=>{const ui=new UI;ui.addBookToList(book)})}static addBook(book){const books=Store.getBooks();books.push(book),localStorage.setItem("books",JSON.stringify(books))}static removeBooks(isbn){const books=Store.getBooks();books.forEach((book,index)=>{book.isbn,localStorage.setItem("books",JSON.stringify(books))})}}document.addEventListener("DOMContentLoaded",Store.displayBooks),document.getElementById("book-form").addEventListener("submit",(function(e){const title=document.getElementById("book-title").value,author=document.getElementById("book-author").value,isbn=document.getElementById("ISBN").value,book=new Book(title,author,isbn),ui=new UI;""===title||""===author||""===isbn?ui.showAlert("Kindly enter valid information in all fields","error"):(ui.addBookToList(book),Store.addBook(book),ui.showAlert("Book info added successfully","success"),ui.clearFields()),e.preventDefault()})),document.getElementById("book-list").addEventListener("click",(function(e){const ui=new UI;confirm("Confirm Deletion?")&&(ui.deleteBook(e.target),Store.removeBooks(e.target.parentElement.previousElementSibling.textContent),ui.showAlert("Book info deleted","error")),e.preventDefault()}));